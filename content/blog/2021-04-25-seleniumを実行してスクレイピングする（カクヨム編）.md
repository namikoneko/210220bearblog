---
title: seleniumを実行してスクレイピングする（カクヨム編）
slug: execute-selenium-kakuyomu
date: 2021-04-25T00:33:35.297Z
description: seleniumを実行してカクヨムをスクレイピングする。
tags:
  - python
  - scraping
---
## ディレクトリ

/Users/takashi/Downloads/python/210110

成功した

## コード

```
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.common.keys import Keys
import time

#driver = webdriver.Chrome('/Users/takashi/Downloads/python/201229/chromedriver')
options = webdriver.ChromeOptions()
options.add_argument('--headless')
#options.add_argument('--no-sandbox')
driver = webdriver.Chrome(executable_path='/Users/takashi/Downloads/python/210110/chromedriver',options=options)

# 要素が見つかるまで、最大20秒間待機する
driver.implicitly_wait(20)

#driver.get('https://www.google.co.jp/') 
driver.get('https://kakuyomu.jp/login?location=%2F')

time.sleep(2)
#<input type="email" name="email_address" placeholder="メールアドレス" aria-label="メールアドレス" tabindex="1" required="" autofocus="">
#<input type="password" name="password" placeholder="パスワード" aria-label="パスワード" tabindex="2" required="">
search_box = driver.find_element_by_name('email_address')
search_box.send_keys('e-mail-address')
search_box = driver.find_element_by_name('password')
search_box.send_keys('secret-password')
search_box.submit()
time.sleep(2)

#driver.find_element_by_xpath('//*[@id="globalHeaderPC-subNav"]/li[2]/a/span').click()#ヘッドレスモードではなぜかできなかった
#driver.find_element_by_link_text('ワークスペース').click()#うまくいかなかった
driver.get('https://kakuyomu.jp/my')#直接urlをgetしたら遷移できた

driver.find_element_by_link_text('aaa').click()
print(driver.current_url)
time.sleep(2)

for i in range(3):

    #次のエピソードを執筆
    driver.find_element_by_xpath('//*[@id="toc-bulkEditForm"]/div[1]/p/a').click()
    #print(driver.current_url)
    time.sleep(2)

    textbox = driver.find_element_by_xpath('//*[@id="episodeBody-input"]')
    textbox.send_keys("selenium!1024")
    textbox.submit()
    #print(driver.current_url)
    time.sleep(2)

driver.close()
driver.quit()

```